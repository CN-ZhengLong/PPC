<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PCDN 收益计算器</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            text-align: center;
            color: #0056b3;
        }
        .input-group {
            margin-bottom: 15px;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .input-group input[type="number"],
        .input-group select {
            width: calc(100% - 120px); /* Adjust width for input + unit select */
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            display: inline-block;
            vertical-align: middle;
        }
        .input-group select {
            width: 100px; /* Width for unit select */
            margin-left: 5px;
        }
        button {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 20px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .results {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        .results p {
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        .results strong {
            color: #28a745;
            font-size: 1.2em;
        }
        .disclaimer {
            font-size: 0.9em;
            color: #666;
            margin-top: 20px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>PCDN 收益计算器</h1>
        <p>输入您的 PCDN 贡献数据，即可估算潜在收益。</p>

        <hr>

        <h2>输入数据</h2>

        <div class="input-group">
            <label for="bandwidth">贡献带宽:</label>
            <input type="number" id="bandwidth" placeholder="例如：100" step="0.1">
            <select id="bandwidthUnit">
                <option value="Mbps">Mbps</option>
                <option value="Gbps">Gbps</option>
            </select>
            <p style="font-size: 0.9em; color: #777;">您的平均上传带宽或可提供带宽。</p>
        </div>

        <div class="input-group">
            <label for="storage">贡献存储空间:</label>
            <input type="number" id="storage" placeholder="例如：1" step="0.1">
            <select id="storageUnit">
                <option value="GB">GB</option>
                <option value="TB">TB</option>
            </select>
            <p style="font-size: 0.9em; color: #777;">您用于 PCDN 存储的硬盘空间。</p>
        </div>

        <div class="input-group">
            <label for="onlineHours">平均在线时长 (小时/天):</label>
            <input type="number" id="onlineHours" placeholder="例如：20" step="0.1">
            <p style="font-size: 0.9em; color: #777;">您的设备每天平均在线时长。</p>
        </div>

        <div class="input-group">
            <label for="bandwidthPrice">带宽单价 (元/Mbps/月):</label>
            <input type="number" id="bandwidthPrice" placeholder="例如：0.05" step="0.001">
            <p style="font-size: 0.9em; color: #777;">根据 PCDN 平台公布的计费标准。</p>
        </div>

        <div class="input-group">
            <label for="storagePrice">存储单价 (元/TB/月):</label>
            <input type="number" id="storagePrice" placeholder="例如：5" step="0.1">
            <p style="font-size: 0.9em; color: #777;">根据 PCDN 平台公布的计费标准。</p>
        </div>

        <div class="input-group">
            <label for="platformFee">平台抽成比例 (%):</label>
            <input type="number" id="platformFee" placeholder="例如：20" step="0.1" value="0">
            <p style="font-size: 0.9em; color: #777;">PCDN 平台可能收取的服务费比例。</p>
        </div>

        <div class="input-group">
            <label for="electricityCost">电费成本 (元/度):</label>
            <input type="number" id="electricityCost" placeholder="例如：0.6" step="0.01" value="0">
            <p style="font-size: 0.9em; color: #777;">您的地区电费价格，用于估算运营成本。</p>
        </div>

        <div class="input-group">
            <label for="devicePower">设备平均功耗 (瓦):</label>
            <input type="number" id="devicePower" placeholder="例如：10" step="0.1" value="0">
            <p style="font-size: 0.9em; color: #777;">您的 PCDN 设备平均功耗。</p>
        </div>

        <button onclick="calculatePCDNRevenue()">计算收益</button>

        <hr>

        <h2>计算结果</h2>
        <div class="results">
            <p>月度预估净收益: <strong><span id="monthlyRevenue">0.00 元</span></strong></p>
            <p>年度预估净收益: <strong><span id="annualRevenue">0.00 元</span></strong></p>
            <p>月度预估电费成本: <strong><span id="monthlyElectricityCost">未计算</span></strong></p>
        </div>

        <p class="disclaimer">
            以上结果为估算值，实际收益可能因 PCDN 平台策略、网络波动、资源利用率、设备稳定性、用户需求等因素有所差异。请以 PCDN 平台结算为准。
        </p>
    </div>

    <script>
        // PCDN 收益计算函数
        function calculatePCDNRevenue() {
            const bandwidth = parseFloat(document.getElementById('bandwidth').value);
            const bandwidthUnit = document.getElementById('bandwidthUnit').value; // 'Mbps' or 'Gbps'
            const storage = parseFloat(document.getElementById('storage').value);
            const storageUnit = document.getElementById('storageUnit').value; // 'GB' or 'TB'
            const onlineHours = parseFloat(document.getElementById('onlineHours').value);
            const bandwidthPrice = parseFloat(document.getElementById('bandwidthPrice').value); // 元/Mbps/月
            const storagePrice = parseFloat(document.getElementById('storagePrice').value);   // 元/TB/月
            const platformFee = parseFloat(document.getElementById('platformFee').value || 0); // 平台抽成比例, 默认为0
            const electricityCostPerKWH = parseFloat(document.getElementById('electricityCost').value || 0); // 元/度
            const devicePowerConsumption = parseFloat(document.getElementById('devicePower').value || 0); // 瓦

            // 输入验证
            if (isNaN(bandwidth) || isNaN(storage) || isNaN(onlineHours) || isNaN(bandwidthPrice) || isNaN(storagePrice)) {
                alert("请确保所有必填项都已正确填写数字！");
                return;
            }

            let actualBandwidth = bandwidth;
            if (bandwidthUnit === 'Gbps') {
                actualBandwidth = bandwidth * 1024; // Gbps 转换为 Mbps
            }

            let actualStorage = storage;
            if (storageUnit === 'GB') {
                actualStorage = storage / 1024; // GB 转换为 TB
            }

            // 在线时长比例 (假设一个月30天，每天24小时)
            const onlineRatio = (onlineHours / 24);

            // 计算总电费 (月度)
            // 功耗 (瓦) / 1000 = 千瓦 (KW)
            // 千瓦 * 小时/天 * 30天 = 千瓦时 (度)
            // 千瓦时 * 每度电费 = 月度电费
            const monthlyElectricityCost = (devicePowerConsumption / 1000) * onlineHours * 30 * electricityCostPerKWH;


            // 估算月度总收益 (未扣除平台抽成和电费)
            const estimatedGrossRevenue = (actualBandwidth * bandwidthPrice * onlineRatio) + (actualStorage * storagePrice * onlineRatio);

            // 扣除平台抽成
            const revenueAfterPlatformFee = estimatedGrossRevenue * (1 - (platformFee / 100));

            // 计算月度净收益
            const estimatedNetRevenue = revenueAfterPlatformFee - monthlyElectricityCost;

            // 更新页面显示
            document.getElementById('monthlyRevenue').innerText = estimatedNetRevenue.toFixed(2) + " 元";
            document.getElementById('annualRevenue').innerText = (estimatedNetRevenue * 12).toFixed(2) + " 元";
            if (electricityCostPerKWH > 0 && devicePowerConsumption > 0) {
                document.getElementById('monthlyElectricityCost').innerText = monthlyElectricityCost.toFixed(2) + " 元";
            } else {
                document.getElementById('monthlyElectricityCost').innerText = "未计算";
            }
        }
    </script>
</body>
</html>
